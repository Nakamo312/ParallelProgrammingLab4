# ParallelProgrammingLab4
# Исследование производительности умножения матриц (CPU/GPU)

Проект сравнивает производительность умножения матриц на CPU (с использованием многопоточности) и на GPU (с использованием CUDA).

## Особенности
- Поддержка нескольких режимов работы:
  - `serial` - однопоточное выполнение на CPU
  - `parallel` - многопоточное выполнение на CPU
  - `cuda` - выполнение на GPU с использованием CUDA
  - `mpi` - параллельное выполнение с использованием MPI
- Генерация тепловых карт производительности
- Автоматическая валидация результатов
- Гибкая настройка параметров тестирования

## Требования
- **Оборудование**:
  - Для режима CUDA: GPU с поддержкой CUDA
  - Для режима MPI: установленный MPI-рантайм
- **Софт**:
  - Bash-совместимый терминал
  - Python 3.8+
  - Утилита `matrix_mult` (скомпилированная из исходников)
  - Для CUDA: CUDA Toolkit (версия >= 11.0)
- **Библиотеки Python**:
  - NumPy, Pandas, Matplotlib, Seaborn

## Установка
1. Скомпилируйте утилиту `matrix_mult` с поддержкой нужных режимов:
   ```bash
   make all  # или конкретный target для вашей конфигурации

# Запуск
Базовый запуск (по умолчанию - многопоточный режим):

```./benchmark.sh```

## Параметры запуска

| Параметр    | Описание                                  | По умолчанию           |
|-------------|-------------------------------------------|------------------------|
| `--mode`    | Режим работы:<br>`serial` - однопоточный<br>`parallel` - многопоточный<br>`cuda` - GPU с CUDA<br>`mpi` - MPI-режим | `parallel`             |
| `--sizes`   | Размеры тестируемых матриц (через пробел) | `100 200 300 400 500`  |
| `--threads` | Количество потоков (для parallel-режима)  | `1 2 4 8`              |
| `--blocks`  | Размеры блоков (для CUDA, через пробел)   | `16 32`                |
| `--csv`     | Имя выходного CSV-файла с результатами    | `results.csv`          |
| `--plot`    | Имя файла для сохранения графика          | `performance_plot.png` |

## Пример для CUDA:

```./benchmark.sh --mode cuda --sizes "256 512 1024" --blocks "16 32 64" --csv cuda_results.csv --plot cuda_performance.png```

# Выходные данные
- CSV-файл с результатами тестов (размер матрицы, параметры, время, GFLOPS, результат валидации)
- Тепловая карта производительности в PNG-формате

# Интерпретация результатов
Для CPU-режимов тепловая карта показывает время выполнения в миллисекундах в зависимости от:

- Размера матрицы (ось Y)

- Количества потоков (ось X)

Для CUDA:

- Размер матрицы (ось Y)

- Размер блока (ось X)

Невалидные результаты (если проверка включена) выделяются специальным образом
